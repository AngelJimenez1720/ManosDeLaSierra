<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="img/pottery.png" type="image/png">
  <title>Saberes Olmeca-Zoque - Patrimonio Cultural</title>
<style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fcefe6;
      min-height: 100vh;
      color: #6d4c41;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      width: 100%;
    }

    /* BARRA SUPERIOR CON LOGIN */
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      width: 100%;
      padding: 0 20px;
    }

    .auth-section {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
      background: #fff3e0;
      padding: 8px 15px;
      border-radius: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #a1887f;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
    }

    .btn-login {
      background: #a1887f;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }

    .btn-login:hover {
      background: #6d4c41;
    }

    .btn-logout {
      background: transparent;
      color: #a1887f;
      border: 1px solid #a1887f;
      padding: 6px 12px;
      border-radius: 15px;
      cursor: pointer;
      font-size: 0.8rem;
      transition: all 0.3s ease;
    }

    .btn-logout:hover {
      background: #a1887f;
      color: white;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
      padding: 20px 0;
    }

    .header h1 {
      color: #6d4c41;
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .header p {
      color: #5d4037;
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
    }

    .culture-badge {
      display: inline-block;
      background: #a1887f;
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      margin-top: 10px;
    }

    .back-button {
      background: #a1887f;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      transition: background-color 0.3s ease;
    }

    .back-button:hover {
      background: #6d4c41;
    }

    .category-tabs {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .category-tab {
      padding: 12px 24px;
      background: #fff3e0;
      border: 1px solid #d7ccc8;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #6d4c41;
      font-weight: bold;
    }

    .category-tab.active,
    .category-tab:hover {
      background: #a1887f;
      color: white;
    }

    .filters {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 10px 20px;
      background: #fff3e0;
      border: 1px solid #d7ccc8;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #6d4c41;
    }

    .filter-btn.active,
    .filter-btn:hover {
      background: #a1887f;
      color: white;
    }

    .search-box {
      max-width: 500px;
      margin: 0 auto 30px;
      position: relative;
    }

    .search-box input {
      width: 100%;
      padding: 12px 20px;
      border: 1px solid #d7ccc8;
      border-radius: 25px;
      font-size: 1rem;
      background: #fff3e0;
      color: #6d4c41;
    }

    .search-box input::placeholder {
      color: #8d6e63;
    }

    .search-box i {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #a1887f;
    }

    .catalog-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
      margin-bottom: 40px;
    }

    .technique-card {
      background: #fff3e0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .technique-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    .card-image {
      width: 100%;
      height: 200px;
      border-radius: 8px 8px 0 0;
      overflow: hidden;
      position: relative;
    }

    .card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .artesania {
      background: linear-gradient(45deg, #8d6e63, #a1887f);
    }

    .gastronomia {
      background: linear-gradient(45deg, #a1887f, #bcaaa4);
    }

    .card-content {
      padding: 25px;
    }

    .card-content h3 {
      color: #6d4c41;
      margin-bottom: 12px;
      font-size: 1.4rem;
    }

    .card-content p {
      color: #5d4037;
      margin-bottom: 15px;
      line-height: 1.6;
    }

    .card-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      font-size: 0.9rem;
      color: #8d6e63;
    }

    .difficulty {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: bold;
    }

    .difficulty.facil {
      background: #e8f5e8;
      color: #2e7d32;
    }

    .difficulty.medio {
      background: #fff3e0;
      color: #ef6c00;
    }

    .difficulty.avanzado {
      background: #ffebee;
      color: #c62828;
    }

    .region-tag {
      display: inline-block;
      padding: 4px 8px;
      background: #f5f5f5;
      color: #5d4037;
      border-radius: 10px;
      font-size: 0.8rem;
    }

    .btn-tutorial {
      width: 100%;
      padding: 12px;
      background: #a1887f;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 10px;
    }

    .btn-tutorial:hover {
      background: #6d4c41;
    }

    .progress-section {
      background: #fff3e0;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      margin-top: 40px;
    }

    .progress-section h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #6d4c41;
    }

    .progress-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      text-align: center;
    }

    .stat {
      padding: 20px;
      background: #fcefe6;
      border-radius: 10px;
    }

    .stat-number {
      font-size: 2rem;
      font-weight: bold;
      color: #a1887f;
      display: block;
    }

    .stat-label {
      color: #5d4037;
      font-size: 0.9rem;
    }

    /* MODAL DE LOGIN */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: #fff3e0;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      position: relative;
    }

    .modal h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #6d4c41;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #6d4c41;
      font-weight: bold;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 1px solid #d7ccc8;
      border-radius: 6px;
      background: white;
      color: #6d4c41;
      font-size: 1rem;
    }

    .form-group input::placeholder {
      color: #8d6e63;
    }

    .btn-primary {
      width: 100%;
      padding: 12px;
      background: #a1887f;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 10px;
      transition: background-color 0.3s ease;
    }

    .btn-primary:hover {
      background: #6d4c41;
    }

    .btn-secondary {
      width: 100%;
      padding: 12px;
      background: transparent;
      color: #a1887f;
      border: 1px solid #a1887f;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-secondary:hover {
      background: #a1887f;
      color: white;
    }

    .close-modal {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: #6d4c41;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .error-message {
      color: #c62828;
      text-align: center;
      margin-top: 10px;
      font-size: 0.9rem;
    }
/* ESTILOS PARA EL LOGO EN CABECERA */
.header-logo {
  text-align: center;
 
}
.site-logo {
  width: 200px;
  height: 200px;
  margin-bottom: 5px;
}
    @media (max-width: 768px) {
      .catalog-grid {
        grid-template-columns: 1fr;
      }
      
      .header h1 {
        font-size: 2rem;
      }
      
      .filters {
        justify-content: flex-start;
        overflow-x: auto;
        padding-bottom: 10px;
      }

      .top-bar {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }

      .auth-section {
        align-self: flex-end;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- BARRA SUPERIOR CON LOGIN -->
    <div class="top-bar">
      <a href="index.html" class="back-button">← Volver al Inicio</a> 
      <div class="auth-section">
        <div id="userInfo" class="user-info" style="display: none;">
          <div class="user-avatar" id="userAvatar">U</div>
          <span id="userName">Usuario</span>
          <button class="btn-logout" onclick="logout()">Cerrar Sesión</button>
        </div>
        <button id="loginButton" class="btn-login" onclick="openLoginModal()">Iniciar Sesión</button>
      </div>
    </div>
    <!-- Logo 
<div class="header-logo">
  <img src="img/LogoCCM.png" alt="Logo Cultura Olmeca-Zoque" class="site-logo">
</div>-->

    <div class="header">
<h1 class="site-title">Saberes Ancestrales Olmeca-Zoque</h1>

      <p>Preservando las técnicas milenarias de gastronomía y artesanías de la cultura madre de Mesoamérica</p>
      <div class="culture-badge">Cultura Olmeca-Zoque • Región: Istmo de Tehuantepec</div>
    </div>
    <!-- MODAL DE LOGIN -->
    <div id="loginModal" class="modal">
      <div class="modal-content">
        <button class="close-modal" onclick="closeLoginModal()">×</button>
        <h2>Iniciar Sesión</h2>
        <form id="loginForm">
          <div class="form-group">
            <label for="email">Correo Electrónico</label>
            <input type="email" id="email" placeholder="tu@email.com" required>
          </div>
          <div class="form-group">
            <label for="password">Contraseña</label>
            <input type="password" id="password" placeholder="Tu contraseña" required>
          </div>
          <button type="submit" class="btn-primary">Iniciar Sesión</button>
          <div id="loginError" class="error-message"></div>
        </form>
        <p style="text-align: center; margin: 15px 0; color: #7d5d3b;">o</p>
        <a href="registro.html"><button class="btn-secondary" onclick="signUp()">Crear Cuenta</button></a>
      </div>
    </div>
    <!-- CATEGORÍAS Y FILTROS -->
    <div class="category-tabs">
      <button class="category-tab active" data-category="all">Todos los Saberes</button>
      <button class="category-tab" data-category="gastronomia">Gastronomía Ancestral</button>
      <button class="category-tab" data-category="artesania">Artesanías Tradicionales</button>
    </div>
    <div class="search-box">
      <input type="text" placeholder="Buscar técnica, ingrediente o material olmeca-zoque..." id="searchInput">
      <i>🔍</i>
    </div>
    <!-- CATÁLOGO DE TÉCNICAS -->
    <div class="catalog-grid" id="catalogGrid">
      <!-- Las tarjetas se generarán con JavaScript -->
    </div>
    <div class="progress-section">
      <h2>Tu Progreso en los Saberes Olmeca-Zoque</h2>
      <div class="progress-stats">
        <div class="stat">
          <span class="stat-number" id="completedCount">0</span>
          <span class="stat-label">Técnicas Dominadas</span>
        </div>
        <div class="stat">
          <span class="stat-number" id="inProgressCount">0</span>
          <span class="stat-label">En Aprendizaje</span>
        </div>
        <div class="stat">
          <span class="stat-number" id="hoursLearned">0</span>
          <span class="stat-label">Horas de Sabiduría</span>
        </div>
        <div class="stat">
          <span class="stat-number" id="techniquesLearned">0</span>
          <span class="stat-label">Saberes Adquiridos</span>
        </div>
      </div>
    </div>
  </div>
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script>
    // Configuración de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDFegGV0yboLGtN3vkUNTN_X5J2PFe7rXc",
      authDomain: "artesaniasapp-5a422.firebaseapp.com",
      projectId: "artesaniasapp-5a422",
      storageBucket: "artesaniasapp-5a422.firebasestorage.app",
      messagingSenderId: "1064065009733",
      appId: "1:1064065009733:web:d6e6ffa7ee02be1d2fbb2c"
    };
    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    // DATOS COMPLETOS DE LAS TÉCNICAS OLMECA-ZOQUE
    const techniques = [
      // GASTRONOMÍA OLMECA-ZOQUE
      {
        id: 1,
        name: "Pozol de Cacao y Maíz",
        description: "Bebida ceremonial ancestral preparada con maíz nixtamalizado y cacao, fermentada de forma tradicional.",
        category: "gastronomia",
        type: "bebida_ceremonial",
        difficulty: "medio",
        duration: "3 semanas",
        lessons: 6,
        icon: "🍫",
        instructor: "Abuela María López",
        students: 1567,
        rating: 4.9,
        region: "Chiapas-Tabasco",
        cultural_significance: "Bebida ritual utilizada en ceremonias desde tiempos olmecas"
      },
      {
        id: 2,
        name: "Tamales de Chipilín",
        description: "Técnica ancestral de preparar tamales con hierbas locales y proteínas tradicionales de la región.",
        category: "gastronomia",
        type: "comida_ritual",
        difficulty: "avanzado",
        duration: "4 semanas",
        lessons: 8,
        icon: "🌿",
        instructor: "Maestra Rosa Jiménez",
        students: 987,
        rating: 4.8,
        region: "Istmo de Tehuantepec",
        cultural_significance: "Alimento ceremonial de las festividades zoques"
      },
      {
        id: 3,
        name: "Chocolate de Piedra Olmeca",
        description: "Preparación del chocolate usando metate de piedra volcánica, técnica que data del periodo olmeca.",
        category: "gastronomia",
        type: "elaboracion",
        difficulty: "avanzado",
        duration: "5 semanas",
        lessons: 10,
        icon: "🥜",
        instructor: "Maestro Chocolatero Tomás",
        students: 1234,
        rating: 4.9,
        region: "San Lorenzo, Veracruz",
        cultural_significance: "Técnica olmeca original para procesar cacao"
      },
      {
        id: 4,
        name: "Barbacoa de Tierra Zoque",
        description: "Cocción subterránea de carnes usando hierbas aromáticas y técnicas de horneado en hoyo.",
        category: "gastronomia",
        type: "tecnicas_coccion",
        difficulty: "medio",
        duration: "3 semanas",
        lessons: 6,
        icon: "🥩",
        instructor: "Maestro Carnicero Felipe",
        students: 876,
        rating: 4.7,
        region: "Oaxaca-Chiapas",
        cultural_significance: "Método de cocción prehispánico conservado por los zoques"
      },
      {
        id: 5,
        name: "Atole de Maíz Negro",
        description: "Preparación de atoles ceremoniales usando maíces criollos de colores y especias locales.",
        category: "gastronomia",
        type: "bebida_ceremonial",
        difficulty: "facil",
        duration: "2 semanas",
        lessons: 4,
        icon: "🌽",
        instructor: "Doña Esperanza Morales",
        students: 1345,
        rating: 4.6,
        region: "Zoque de Chiapas",
        cultural_significance: "Bebida de ofrenda en rituales agrícolas"
      },
      // ARTESANÍAS OLMECA-ZOQUE
      {
        id: 6,
        name: "Alfarería de Barro Negro Zoque",
        description: "Técnica de bruñido y quema que produce el característico barro negro de la región zoque.",
        category: "artesania",
        type: "ceramica",
        difficulty: "avanzado",
        duration: "6 semanas",
        lessons: 12,
        icon: "🏺",
        instructor: "Maestro Alfarero Mateo",
        students: 765,
        rating: 4.9,
        region: "Ocozocoautla, Chiapas",
        cultural_significance: "Técnica cerámica con 3000 años de antigüedad"
      },
      {
        id: 7,
        name: "Tallado de Jade y Serpentina",
        description: "Arte lapidario olmeca para crear máscaras, hachas y figurillas ceremoniales en piedra verde.",
        category: "artesania",
        type: "lapidaria",
        difficulty: "avanzado",
        duration: "8 semanas",
        lessons: 16,
        icon: "💎",
        instructor: "Maestro Lapidario Andrés",
        students: 432,
        rating: 4.9,
        region: "La Venta, Tabasco",
        cultural_significance: "Arte ritual olmeca para objetos de poder"
      },
      {
        id: 8,
        name: "Tejido en Telar de Cintura Zoque",
        description: "Técnica prehispánica de tejido que produce textiles con diseños geométricos ancestrales.",
        category: "artesania",
        type: "textil",
        difficulty: "medio",
        duration: "5 semanas",
        lessons: 10,
        icon: "🧵",
        instructor: "Maestra Tejedora Isabel",
        students: 987,
        rating: 4.8,
        region: "Tuxtla Gutiérrez",
        cultural_significance: "Patrones que narran la cosmovisión zoque"
      },
      {
        id: 9,
        name: "Cerámica con Motivos Olmecas",
        description: "Reproducción de vasijas y figurillas con los característicos motivos del were-jaguar olmeca.",
        category: "artesania",
        type: "ceramica",
        difficulty: "medio",
        duration: "4 semanas",
        lessons: 8,
        icon: "🐆",
        instructor: "Maestro Ceramista Carlos",
        students: 654,
        rating: 4.7,
        region: "San Miguel Chimalapa",
        cultural_significance: "Iconografía religiosa olmeca en cerámica"
      },
      {
        id: 10,
        name: "Cestería con Bejucos y Palmas",
        description: "Técnicas de cestería usando materiales de la selva como el bejuco y palmas locales.",
        category: "artesania",
        type: "cesteria",
        difficulty: "facil",
        duration: "3 semanas",
        lessons: 6,
        icon: "🧺",
        instructor: "Maestro Cestero Ramón",
        students: 543,
        rating: 4.6,
        region: "Selva Zoque",
        cultural_significance: "Arte utilitario con diseños de la naturaleza local"
      }
    ];
    // FUNCIONES DE AUTENTICACIÓN
    function openLoginModal() {
      document.getElementById('loginModal').style.display = 'flex';
    }
    function closeLoginModal() {
      document.getElementById('loginModal').style.display = 'none';
      document.getElementById('loginError').textContent = '';
    }
    function signUp() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      if (!email || !password) {
        document.getElementById('loginError').textContent = 'Por favor completa todos los campos';
        return;
      }
      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          closeLoginModal();
          updateUI(userCredential.user);
        })
        .catch((error) => {
          document.getElementById('loginError').textContent = error.message;
        });
    }
    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault(); 
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const errorElement = document.getElementById('loginError');
      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          closeLoginModal();
          updateUI(userCredential.user);
        })
        .catch((error) => {
          errorElement.textContent = error.message;
        });
    });
    function logout() {
      auth.signOut().then(() => {
        updateUI(null);
      });
    }
    function updateUI(user) {
      const userInfo = document.getElementById('userInfo');
      const loginButton = document.getElementById('loginButton');
      const userAvatar = document.getElementById('userAvatar');
      const userName = document.getElementById('userName');
      if (user) {
        userInfo.style.display = 'flex';
        loginButton.style.display = 'none';
        const displayName = user.displayName || user.email.split('@')[0];
        userName.textContent = displayName;
        userAvatar.textContent = displayName.charAt(0).toUpperCase();
        localStorage.setItem('currentUser', JSON.stringify({
          email: user.email,
          displayName: displayName
        }));
      } else {
        userInfo.style.display = 'none';
        loginButton.style.display = 'block';
        localStorage.removeItem('currentUser');
      }
    }
    // FUNCIONES DEL CATÁLOGO
    function renderTechniques(filteredTechniques = techniques) {
      const grid = document.getElementById('catalogGrid');
      grid.innerHTML = '';

      if (filteredTechniques.length === 0) {
        grid.innerHTML = `
          <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #7d5d3b;">
            <h3>No se encontraron saberes olmeca-zoques</h3>
            <p>Intenta con otros filtros o términos de búsqueda</p>
          </div>
        `;
        return;
      }

      filteredTechniques.forEach(tech => {
        const card = document.createElement('div');
        card.className = 'technique-card';
        
        // Determinar la imagen basada en el ID o nombre
        let imageSrc = '';
        if (tech.id === 1) { // Pozol
          imageSrc = 'img/pozolp.jpg';
        } else if (tech.id === 2) { // Tamales
          imageSrc = 'img/tamales.jpg';
        } else if (tech.id === 3) { // Chocolate
          imageSrc = 'img/chocolate.jpg';
        }else if (tech.id === 4) { // Barbacoa
          imageSrc = 'img/barbacoa.jpg';
        }
        else if (tech.id === 5) { // Atole
          imageSrc = 'img/atole.jpg';
        }
        else if (tech.id === 6){
            imageSrc = 'img/alfareria.jpg';
        }
        else if(tech.id===7){
          imageSrc= 'img/jade.jpeg';
        }
        else if(tech.id===8){
          imageSrc= 'img/tejido.jpeg';
        }
        else if(tech.id===9){
          imageSrc= 'img/ceramica.jpeg';
        }
        else if(tech.id===10){
          imageSrc= 'img/cesteria.jpeg';
        }
        card.innerHTML = `
  <div class="card-image ${tech.category}">
    ${imageSrc ? `<img src="${imageSrc}" alt="${tech.name}" onerror="this.style.display='none'">` : tech.icon}
  </div>
  <div class="card-content">
    <h3>${tech.name}</h3>
    <p>${tech.description}</p>
          <div class="card-content">
            <h3>${tech.name}</h3>
            <p>${tech.description}</p>
            <div class="card-meta">
              <span class="instructor">Por ${tech.instructor}</span>
              <span class="difficulty ${tech.difficulty}">
                ${tech.difficulty.charAt(0).toUpperCase() + tech.difficulty.slice(1)}
              </span>
            </div>
            <div class="card-meta">
              <span>${tech.duration} • ${tech.lessons} lecciones</span>
              <span class="region-tag">${tech.region}</span>
            </div>
            <div class="card-meta">
              <span>⭐ ${tech.rating} (${tech.students} aprendices)</span>
            </div>
            <div style="margin-bottom: 10px; font-size: 0.85rem; color: #8b7355;">
              <em>${tech.cultural_significance}</em>
            </div>
            <button class="btn-tutorial" onclick="viewTutorial(${tech.id})">
              Aprender Saber Ancestral
            </button>
          </div>
        `;
        grid.appendChild(card);
      });
    }
    function filterByCategory(category) {
      if (category === 'all') {
        renderTechniques();
        return;
      }
      const filtered = techniques.filter(tech => tech.category === category);
      renderTechniques(filtered);
    }
    function searchTechniques(query) {
      const filtered = techniques.filter(tech =>
        tech.name.toLowerCase().includes(query.toLowerCase()) ||
        tech.description.toLowerCase().includes(query.toLowerCase()) ||
        tech.instructor.toLowerCase().includes(query.toLowerCase()) ||
        tech.region.toLowerCase().includes(query.toLowerCase()) ||
        tech.type.toLowerCase().includes(query.toLowerCase()) ||
        tech.cultural_significance.toLowerCase().includes(query.toLowerCase())
      );
      renderTechniques(filtered);
    }
    
    // FUNCIÓN MODIFICADA PARA REDIRECCIÓN
    function viewTutorial(id) {
      const user = auth.currentUser;
      if (!user) {
        openLoginModal();
        return;
      }
      
      const tech = techniques.find(t => t.id === id);
      localStorage.setItem('selectedTutorial', JSON.stringify(tech));
      
      // Redirigir a diferentes páginas según el ID
      if (id === 2) { // Tamales
        window.location.href = 'tamales-tutorial.html';
      } else if (id === 1) { // Pozol
        window.location.href = 'pozol.html?id=${id}';
      } else if (id === 3) { // Chocolate
        window.location.href = 'chocolate.html?id=${id}';
      } else {
        // Para otros tutoriales, usar la página genérica con parámetros
        window.location.href = 'tutorial.html?id=${id}';
      }
    }
    
    // INICIALIZACIÓN
    document.addEventListener('DOMContentLoaded', () => {
      // Verificar autenticación
      auth.onAuthStateChanged((user) => {
        updateUI(user);
      });
      // Renderizar técnicas
      renderTechniques();
      // Event listeners
      document.querySelectorAll('.category-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          filterByCategory(tab.dataset.category);
        });
      });
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          filterByDifficulty(btn.dataset.filter);
        });
      });
      document.getElementById('searchInput').addEventListener('input', (e) => {
        searchTechniques(e.target.value);
      });
      document.getElementById('loginModal').addEventListener('click', (e) => {
        if (e.target.id === 'loginModal') {
          closeLoginModal();
        }
      });
      document.getElementById('completedCount').textContent = '0';
      document.getElementById('inProgressCount').textContent = '0';
      document.getElementById('hoursLearned').textContent = '0';
      document.getElementById('techniquesLearned').textContent = '0';
    });
  </script>
</body>
</html>